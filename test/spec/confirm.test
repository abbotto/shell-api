#!/usr/bin/env sh

set -u

SPEC_NAME='confirm'
export SPEC_NAME

. ./test/tmp/shell-api
./test/util/test-intro.sh

success() {
	return 0
}

failure() {
	return 1
}

spec --describe "∙ should handle 'yes' input correctly..."
spec --evaluate "echo 'y' | confirm '' success failure"
spec --assert "${?}" 0

spec --describe "∙ should handle 'no' input correctly..."
spec --evaluate "echo 'n' | confirm '' success failure"
spec --assert "${?}" '1'

spec --describe "∙ should fail when there are not enough arguments..."
spec --evaluate "confirm >/dev/null 2>&1"
spec --assert "${?}" 127

spec --describe "∙ should fail when there are too many arguments..."
spec --evaluate "confirm 1 2 3 4 5 >/dev/null 2>&1"
spec --assert "${?}" 1

. ./test/util/test-outro.sh
